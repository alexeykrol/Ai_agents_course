{
    "name": "Универсальный ТГ бот от @MG_BurBuRu Ковчег+",
    "flow": [
        {
            "id": 189,
            "module": "telegram:WatchUpdates",
            "version": 1,
            "parameters": {
                "__IMTHOOK__": 1927152
            },
            "mapper": {},
            "metadata": {
                "designer": {
                    "x": 0,
                    "y": 1050
                },
                "restore": {
                    "parameters": {
                        "__IMTHOOK__": {
                            "data": {
                                "editable": "false"
                            },
                            "label": "Тест для Ковчега"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "__IMTHOOK__",
                        "type": "hook:telegramapi",
                        "label": "Webhook",
                        "required": true
                    }
                ]
            }
        },
        {
            "id": 195,
            "module": "datastore:SearchRecord",
            "version": 1,
            "parameters": {
                "datastore": 59056,
                "continueWhenNoRes": false,
                "limit": null
            },
            "mapper": {
                "filter": [
                    [
                        {
                            "a": "ID User",
                            "o": "text:equal",
                            "b": "{{189.message.from.id}}"
                        },
                        {
                            "a": "Thread ID",
                            "o": "exist"
                        }
                    ]
                ],
                "sort": [],
                "mappAbleLimit": ""
            },
            "metadata": {
                "designer": {
                    "x": 300,
                    "y": 1050,
                    "name": "Проверка Thread ID"
                },
                "restore": {
                    "parameters": {
                        "datastore": {
                            "label": "Ковчег"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "datastore",
                        "type": "datastore",
                        "label": "Data store",
                        "required": true
                    },
                    {
                        "name": "continueWhenNoRes",
                        "type": "boolean",
                        "label": "Continue the execution of the route even if the module returns no results"
                    },
                    {
                        "name": "limit",
                        "type": "uinteger",
                        "label": "Limit"
                    }
                ],
                "expect": [
                    {
                        "name": "filter",
                        "type": "filter",
                        "label": "Filter",
                        "required": true,
                        "options": "rpc://datastore/1.10.14/RpcGetUDTKeys"
                    },
                    {
                        "name": "sort",
                        "type": "array",
                        "label": "Sort",
                        "spec": [
                            {
                                "name": "key",
                                "label": "Key",
                                "type": "select",
                                "options": [],
                                "required": true,
                                "dynamic": true
                            },
                            {
                                "name": "order",
                                "label": "Order",
                                "type": "select",
                                "options": [
                                    {
                                        "label": "Ascending",
                                        "value": 1
                                    },
                                    {
                                        "label": "Descending",
                                        "value": -1
                                    }
                                ],
                                "required": true
                            }
                        ]
                    },
                    {
                        "name": "mappAbleLimit",
                        "type": "uinteger",
                        "label": "Mappable Limit"
                    }
                ],
                "interface": [
                    {
                        "name": "__IMTLENGTH__",
                        "label": "Total number of bundles",
                        "type": "uinteger"
                    },
                    {
                        "name": "__IMTINDEX__",
                        "label": "Bundle order position",
                        "type": "uinteger"
                    },
                    {
                        "name": "key",
                        "type": "text",
                        "label": "Key"
                    },
                    {
                        "name": "data",
                        "type": "collection",
                        "label": "Record",
                        "spec": [
                            {
                                "name": "ID User",
                                "label": null,
                                "type": "text",
                                "default": null,
                                "required": false,
                                "multiline": false
                            },
                            {
                                "name": "Thread ID",
                                "label": null,
                                "type": "text",
                                "default": null,
                                "required": false,
                                "multiline": false
                            },
                            {
                                "name": "Vector store",
                                "label": null,
                                "type": "text",
                                "default": null,
                                "required": false,
                                "multiline": false
                            }
                        ]
                    }
                ]
            }
        },
        {
            "id": 196,
            "module": "util:TextAggregator",
            "version": 1,
            "parameters": {
                "rowSeparator": "",
                "feeder": 195
            },
            "mapper": {
                "value": "{{195.data.`Thread ID`}}"
            },
            "metadata": {
                "designer": {
                    "x": 600,
                    "y": 1050,
                    "name": "Показывает Thread ID"
                },
                "restore": {
                    "parameters": {
                        "rowSeparator": {
                            "label": "Empty"
                        }
                    },
                    "extra": {
                        "feeder": {
                            "label": "Data store - Search records [195]"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "rowSeparator",
                        "type": "select",
                        "label": "Row separator",
                        "validate": {
                            "enum": [
                                "\n",
                                "\t",
                                "other"
                            ]
                        }
                    }
                ],
                "expect": [
                    {
                        "name": "value",
                        "type": "text",
                        "label": "Text"
                    }
                ]
            }
        },
        {
            "id": 238,
            "module": "datastore:SearchRecord",
            "version": 1,
            "parameters": {
                "datastore": 59056,
                "continueWhenNoRes": false,
                "limit": null
            },
            "mapper": {
                "filter": [
                    [
                        {
                            "a": "ID User",
                            "o": "text:equal",
                            "b": "{{189.message.from.id}}"
                        },
                        {
                            "a": "Vector store",
                            "o": "exist"
                        }
                    ]
                ],
                "sort": [],
                "mappAbleLimit": ""
            },
            "metadata": {
                "designer": {
                    "x": 900,
                    "y": 1050,
                    "name": "Проверка Vector store"
                },
                "restore": {
                    "parameters": {
                        "datastore": {
                            "label": "Ковчег"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "datastore",
                        "type": "datastore",
                        "label": "Data store",
                        "required": true
                    },
                    {
                        "name": "continueWhenNoRes",
                        "type": "boolean",
                        "label": "Continue the execution of the route even if the module returns no results"
                    },
                    {
                        "name": "limit",
                        "type": "uinteger",
                        "label": "Limit"
                    }
                ],
                "expect": [
                    {
                        "name": "filter",
                        "type": "filter",
                        "label": "Filter",
                        "required": true,
                        "options": "rpc://datastore/1.10.14/RpcGetUDTKeys"
                    },
                    {
                        "name": "sort",
                        "type": "array",
                        "label": "Sort",
                        "spec": [
                            {
                                "name": "key",
                                "label": "Key",
                                "type": "select",
                                "options": [],
                                "required": true,
                                "dynamic": true
                            },
                            {
                                "name": "order",
                                "label": "Order",
                                "type": "select",
                                "options": [
                                    {
                                        "label": "Ascending",
                                        "value": 1
                                    },
                                    {
                                        "label": "Descending",
                                        "value": -1
                                    }
                                ],
                                "required": true
                            }
                        ]
                    },
                    {
                        "name": "mappAbleLimit",
                        "type": "uinteger",
                        "label": "Mappable Limit"
                    }
                ],
                "interface": [
                    {
                        "name": "__IMTLENGTH__",
                        "label": "Total number of bundles",
                        "type": "uinteger"
                    },
                    {
                        "name": "__IMTINDEX__",
                        "label": "Bundle order position",
                        "type": "uinteger"
                    },
                    {
                        "name": "key",
                        "type": "text",
                        "label": "Key"
                    },
                    {
                        "name": "data",
                        "type": "collection",
                        "label": "Record",
                        "spec": [
                            {
                                "name": "ID User",
                                "label": null,
                                "type": "text",
                                "default": null,
                                "required": false,
                                "multiline": false
                            },
                            {
                                "name": "Thread ID",
                                "label": null,
                                "type": "text",
                                "default": null,
                                "required": false,
                                "multiline": false
                            },
                            {
                                "name": "Vector store",
                                "label": null,
                                "type": "text",
                                "default": null,
                                "required": false,
                                "multiline": false
                            }
                        ]
                    }
                ]
            }
        },
        {
            "id": 239,
            "module": "util:TextAggregator",
            "version": 1,
            "parameters": {
                "rowSeparator": "",
                "feeder": 238
            },
            "mapper": {
                "value": "{{238.data.`Vector store`}}"
            },
            "metadata": {
                "designer": {
                    "x": 1200,
                    "y": 1050,
                    "name": "Показывает Vector store"
                },
                "restore": {
                    "parameters": {
                        "rowSeparator": {
                            "label": "Empty"
                        }
                    },
                    "extra": {
                        "feeder": {
                            "label": "Data store - Search records [238]"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "rowSeparator",
                        "type": "select",
                        "label": "Row separator",
                        "validate": {
                            "enum": [
                                "\n",
                                "\t",
                                "other"
                            ]
                        }
                    }
                ],
                "expect": [
                    {
                        "name": "value",
                        "type": "text",
                        "label": "Text"
                    }
                ]
            }
        },
        {
            "id": 51,
            "module": "builtin:BasicRouter",
            "version": 1,
            "mapper": null,
            "metadata": {
                "designer": {
                    "x": 1500,
                    "y": 1050,
                    "name": "Божественный разделитель"
                }
            },
            "routes": [
                {
                    "flow": [
                        {
                            "id": 193,
                            "module": "builtin:BasicRouter",
                            "version": 1,
                            "filter": {
                                "name": "Текст",
                                "conditions": [
                                    [
                                        {
                                            "a": "{{189.message.text}}",
                                            "o": "exist"
                                        }
                                    ]
                                ]
                            },
                            "mapper": null,
                            "metadata": {
                                "designer": {
                                    "x": 1800,
                                    "y": 150,
                                    "name": "Есть Thread ID / Нет Thread ID"
                                }
                            },
                            "routes": [
                                {
                                    "flow": [
                                        {
                                            "id": 190,
                                            "module": "openai-gpt-3:messageAssistantAdvanced",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3446305
                                            },
                                            "filter": {
                                                "name": "Есть Пользователь",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{196.text}}",
                                                            "o": "exist"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": {
                                                "assistantId": "asst_3ihplvuKuyFLoyxylCz9UUcK",
                                                "role": "assistant",
                                                "threadId": "{{196.text}}",
                                                "tools": [
                                                    "file_search"
                                                ],
                                                "file_search_resources": "{{239.text}}",
                                                "tool_choice": "auto",
                                                "response_format": "auto",
                                                "message": "Не используй Markdown\n\n{{189.message.text}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2100,
                                                    "y": 0,
                                                    "name": "Ассистент Текст"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "ProducerBBR_GPT",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "assistantId": {
                                                            "mode": "chose",
                                                            "label": "Тест ковчег (gpt-4o-mini)"
                                                        },
                                                        "role": {
                                                            "label": "Assistant"
                                                        },
                                                        "model": {
                                                            "mode": "chose"
                                                        },
                                                        "tools": {
                                                            "mode": "chose"
                                                        },
                                                        "file_search_resources": {
                                                            "mode": "edit"
                                                        },
                                                        "code_interpreter_resources": {
                                                            "mode": "chose"
                                                        },
                                                        "tool_choice": {
                                                            "mode": "chose",
                                                            "label": "Auto"
                                                        },
                                                        "response_format": {
                                                            "mode": "chose",
                                                            "label": "Auto"
                                                        },
                                                        "truncation_strategy": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "assistantId",
                                                        "type": "select",
                                                        "label": "Assistant",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "role",
                                                        "type": "select",
                                                        "label": "Role",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "user",
                                                                "assistant"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "threadId",
                                                        "type": "text",
                                                        "label": "Thread ID"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model"
                                                    },
                                                    {
                                                        "name": "tools",
                                                        "type": "select",
                                                        "label": "Tools",
                                                        "multiple": true,
                                                        "validate": {
                                                            "enum": [
                                                                "file_search",
                                                                "code_interpreter"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "file_search_resources",
                                                        "type": "select",
                                                        "label": "File Search Resources"
                                                    },
                                                    {
                                                        "name": "code_interpreter_resources",
                                                        "type": "select",
                                                        "label": "Code Interpreter Resources",
                                                        "validate": {
                                                            "maxItems": 20
                                                        },
                                                        "multiple": true
                                                    },
                                                    {
                                                        "name": "tool_choice",
                                                        "type": "select",
                                                        "label": "Tool Choice",
                                                        "validate": {
                                                            "enum": [
                                                                "none",
                                                                "auto",
                                                                "required",
                                                                "file_search",
                                                                "code_interpreter",
                                                                "function"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "instructions",
                                                        "type": "text",
                                                        "label": "Instructions"
                                                    },
                                                    {
                                                        "name": "max_prompt_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Prompt Tokens"
                                                    },
                                                    {
                                                        "name": "max_completion_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Completion Tokens"
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "top_p",
                                                        "type": "number",
                                                        "label": "Top P",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "response_format",
                                                        "type": "select",
                                                        "label": "Response Format",
                                                        "validate": {
                                                            "enum": [
                                                                "auto",
                                                                "json_object",
                                                                "text"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "truncation_strategy",
                                                        "type": "select",
                                                        "label": "Truncation Strategy",
                                                        "validate": {
                                                            "enum": [
                                                                "auto",
                                                                "last_messages"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "message",
                                                        "type": "text",
                                                        "label": "Message",
                                                        "required": true
                                                    }
                                                ],
                                                "advanced": true
                                            }
                                        },
                                        {
                                            "id": 192,
                                            "module": "telegram:SendReplyMessage",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3724557
                                            },
                                            "mapper": {
                                                "chatId": "{{189.message.from.id}}",
                                                "text": "{{190.result}}",
                                                "messageThreadId": "",
                                                "parseMode": "HTML",
                                                "replyToMessageId": "",
                                                "replyMarkupAssembleType": "reply_markup_enter",
                                                "replyMarkup": ""
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2400,
                                                    "y": 0,
                                                    "name": "Отправка пользователю"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "Тест для ковчега",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "telegram"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "parseMode": {
                                                            "label": "HTML"
                                                        },
                                                        "disableNotification": {
                                                            "mode": "chose"
                                                        },
                                                        "replyMarkupAssembleType": {
                                                            "label": "Enter the Reply Markup"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:telegram",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "chatId",
                                                        "type": "text",
                                                        "label": "Chat ID",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "text",
                                                        "type": "text",
                                                        "label": "Text",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "messageThreadId",
                                                        "type": "number",
                                                        "label": "Message Thread ID"
                                                    },
                                                    {
                                                        "name": "parseMode",
                                                        "type": "select",
                                                        "label": "Parse Mode",
                                                        "validate": {
                                                            "enum": [
                                                                "Markdown",
                                                                "HTML"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "disableNotification",
                                                        "type": "boolean",
                                                        "label": "Disable Notifications"
                                                    },
                                                    {
                                                        "name": "disableWebPagePreview",
                                                        "type": "boolean",
                                                        "label": "Disable Link Previews"
                                                    },
                                                    {
                                                        "name": "replyToMessageId",
                                                        "type": "number",
                                                        "label": "Original Message ID"
                                                    },
                                                    {
                                                        "name": "replyMarkupAssembleType",
                                                        "type": "select",
                                                        "label": "Enter/Assemble the Reply Markup Field",
                                                        "validate": {
                                                            "enum": [
                                                                "reply_markup_enter",
                                                                "reply_markup_assemble"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "replyMarkup",
                                                        "type": "text",
                                                        "label": "Reply Markup"
                                                    }
                                                ]
                                            }
                                        }
                                    ]
                                },
                                {
                                    "flow": [
                                        {
                                            "id": 232,
                                            "module": "openai-gpt-3:createVectorStoreFileBatch",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3446305
                                            },
                                            "filter": {
                                                "name": "Новый Пользователь",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{196.text}}",
                                                            "o": "notexist"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": {
                                                "createMode": "create",
                                                "fileIds": [
                                                    "file-6Z3fG1vye74W7UZHrJB2Rh"
                                                ],
                                                "vs_name": "telegram_store{{189.message.from.id}}",
                                                "days_expires_after": "365"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2100,
                                                    "y": 300,
                                                    "name": "Создание Vector store"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "ProducerBBR_GPT",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "createMode": {
                                                            "mode": "chose",
                                                            "label": "Create New Vector Store"
                                                        },
                                                        "fileIds": {
                                                            "mode": "chose",
                                                            "label": [
                                                                "info.txt"
                                                            ]
                                                        },
                                                        "metadata": {
                                                            "mode": "chose"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "createMode",
                                                        "type": "select",
                                                        "label": "Batch Create Mode",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "choose",
                                                                "create"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "fileIds",
                                                        "type": "select",
                                                        "label": "File IDs",
                                                        "required": true,
                                                        "multiple": true
                                                    },
                                                    {
                                                        "name": "vs_name",
                                                        "type": "text",
                                                        "label": "Vector Store Name",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "days_expires_after",
                                                        "type": "uinteger",
                                                        "label": "Days Expires After"
                                                    },
                                                    {
                                                        "name": "metadata",
                                                        "type": "array",
                                                        "label": "Metadata",
                                                        "validate": {
                                                            "maxItems": 16
                                                        },
                                                        "spec": {
                                                            "spec": [
                                                                {
                                                                    "name": "key",
                                                                    "type": "text",
                                                                    "label": "Key",
                                                                    "required": true,
                                                                    "validate": {
                                                                        "max": 64
                                                                    }
                                                                },
                                                                {
                                                                    "name": "value",
                                                                    "type": "text",
                                                                    "label": "Value",
                                                                    "required": true,
                                                                    "validate": {
                                                                        "max": 512
                                                                    }
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Metadata",
                                                            "name": "value"
                                                        }
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 116,
                                            "module": "openai-gpt-3:messageAssistantAdvanced",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3446305
                                            },
                                            "filter": {
                                                "name": "",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{196.text}}",
                                                            "o": "notexist"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": {
                                                "assistantId": "asst_3ihplvuKuyFLoyxylCz9UUcK",
                                                "role": "assistant",
                                                "tool_choice": "auto",
                                                "message": "Не используй Markdown\n\n{{189.message.text}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2400,
                                                    "y": 300,
                                                    "name": "Ассистент Текст"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "ProducerBBR_GPT",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "assistantId": {
                                                            "mode": "chose",
                                                            "nested": [],
                                                            "label": "Тест ковчег (gpt-4o-mini)"
                                                        },
                                                        "role": {
                                                            "label": "Assistant"
                                                        },
                                                        "model": {
                                                            "mode": "chose"
                                                        },
                                                        "tools": {
                                                            "mode": "chose"
                                                        },
                                                        "file_search_resources": {
                                                            "mode": "chose"
                                                        },
                                                        "code_interpreter_resources": {
                                                            "mode": "chose"
                                                        },
                                                        "tool_choice": {
                                                            "mode": "chose",
                                                            "label": "Auto"
                                                        },
                                                        "response_format": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        },
                                                        "truncation_strategy": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "assistantId",
                                                        "type": "select",
                                                        "label": "Assistant",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "role",
                                                        "type": "select",
                                                        "label": "Role",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "user",
                                                                "assistant"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "threadId",
                                                        "type": "text",
                                                        "label": "Thread ID"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model"
                                                    },
                                                    {
                                                        "name": "tools",
                                                        "type": "select",
                                                        "label": "Tools",
                                                        "multiple": true,
                                                        "validate": {
                                                            "enum": [
                                                                "file_search",
                                                                "code_interpreter"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "file_search_resources",
                                                        "type": "select",
                                                        "label": "File Search Resources"
                                                    },
                                                    {
                                                        "name": "code_interpreter_resources",
                                                        "type": "select",
                                                        "label": "Code Interpreter Resources",
                                                        "validate": {
                                                            "maxItems": 20
                                                        },
                                                        "multiple": true
                                                    },
                                                    {
                                                        "name": "tool_choice",
                                                        "type": "select",
                                                        "label": "Tool Choice",
                                                        "validate": {
                                                            "enum": [
                                                                "none",
                                                                "auto",
                                                                "required",
                                                                "file_search",
                                                                "code_interpreter",
                                                                "function"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "instructions",
                                                        "type": "text",
                                                        "label": "Instructions"
                                                    },
                                                    {
                                                        "name": "max_prompt_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Prompt Tokens"
                                                    },
                                                    {
                                                        "name": "max_completion_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Completion Tokens"
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "top_p",
                                                        "type": "number",
                                                        "label": "Top P",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "response_format",
                                                        "type": "select",
                                                        "label": "Response Format",
                                                        "validate": {
                                                            "enum": [
                                                                "auto",
                                                                "json_object",
                                                                "text"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "truncation_strategy",
                                                        "type": "select",
                                                        "label": "Truncation Strategy",
                                                        "validate": {
                                                            "enum": [
                                                                "auto",
                                                                "last_messages"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "message",
                                                        "type": "text",
                                                        "label": "Message",
                                                        "required": true
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 194,
                                            "module": "datastore:AddRecord",
                                            "version": 1,
                                            "parameters": {
                                                "datastore": 59056
                                            },
                                            "mapper": {
                                                "key": "",
                                                "overwrite": false,
                                                "data": {
                                                    "ID User": "{{189.message.from.id}}",
                                                    "Thread ID": "{{116.thread_id}}",
                                                    "Vector store": ""
                                                }
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2700,
                                                    "y": 300,
                                                    "name": "Записывает Thread ID"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "datastore": {
                                                            "label": "Ковчег"
                                                        }
                                                    },
                                                    "expect": {
                                                        "overwrite": {
                                                            "mode": "chose"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "datastore",
                                                        "type": "datastore",
                                                        "label": "Data store",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "key",
                                                        "type": "text",
                                                        "label": "Key"
                                                    },
                                                    {
                                                        "name": "overwrite",
                                                        "type": "boolean",
                                                        "label": "Overwrite an existing record",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "data",
                                                        "type": "collection",
                                                        "label": "Record",
                                                        "spec": [
                                                            {
                                                                "name": "ID User",
                                                                "type": "text",
                                                                "label": null
                                                            },
                                                            {
                                                                "name": "Thread ID",
                                                                "type": "text",
                                                                "label": null
                                                            },
                                                            {
                                                                "name": "Vector store",
                                                                "type": "text",
                                                                "label": null
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 237,
                                            "module": "datastore:AddRecord",
                                            "version": 1,
                                            "parameters": {
                                                "datastore": 59056
                                            },
                                            "mapper": {
                                                "key": "",
                                                "overwrite": false,
                                                "data": {
                                                    "ID User": "{{189.message.from.id}}",
                                                    "Thread ID": "",
                                                    "Vector store": "{{232.vector_store_id}}"
                                                }
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3000,
                                                    "y": 300,
                                                    "name": "Записывает Vector store"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "datastore": {
                                                            "label": "Ковчег"
                                                        }
                                                    },
                                                    "expect": {
                                                        "overwrite": {
                                                            "mode": "chose"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "datastore",
                                                        "type": "datastore",
                                                        "label": "Data store",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "key",
                                                        "type": "text",
                                                        "label": "Key"
                                                    },
                                                    {
                                                        "name": "overwrite",
                                                        "type": "boolean",
                                                        "label": "Overwrite an existing record",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "data",
                                                        "type": "collection",
                                                        "label": "Record",
                                                        "spec": [
                                                            {
                                                                "name": "ID User",
                                                                "type": "text",
                                                                "label": null
                                                            },
                                                            {
                                                                "name": "Thread ID",
                                                                "type": "text",
                                                                "label": null
                                                            },
                                                            {
                                                                "name": "Vector store",
                                                                "type": "text",
                                                                "label": null
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 126,
                                            "module": "telegram:SendReplyMessage",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3724557
                                            },
                                            "mapper": {
                                                "text": "{{116.result}}",
                                                "chatId": "{{189.message.from.id}}",
                                                "parseMode": "HTML",
                                                "replyMarkup": "",
                                                "messageThreadId": "",
                                                "replyToMessageId": "",
                                                "replyMarkupAssembleType": "reply_markup_enter"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3300,
                                                    "y": 300,
                                                    "name": "Отправка пользователю"
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "parseMode": {
                                                            "label": "HTML"
                                                        },
                                                        "disableNotification": {
                                                            "mode": "chose"
                                                        },
                                                        "replyMarkupAssembleType": {
                                                            "label": "Enter the Reply Markup"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "telegram"
                                                            },
                                                            "label": "Тест для ковчега"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:telegram",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "chatId",
                                                        "type": "text",
                                                        "label": "Chat ID",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "text",
                                                        "type": "text",
                                                        "label": "Text",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "messageThreadId",
                                                        "type": "number",
                                                        "label": "Message Thread ID"
                                                    },
                                                    {
                                                        "name": "parseMode",
                                                        "type": "select",
                                                        "label": "Parse Mode",
                                                        "validate": {
                                                            "enum": [
                                                                "Markdown",
                                                                "HTML"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "disableNotification",
                                                        "type": "boolean",
                                                        "label": "Disable Notifications"
                                                    },
                                                    {
                                                        "name": "disableWebPagePreview",
                                                        "type": "boolean",
                                                        "label": "Disable Link Previews"
                                                    },
                                                    {
                                                        "name": "replyToMessageId",
                                                        "type": "number",
                                                        "label": "Original Message ID"
                                                    },
                                                    {
                                                        "name": "replyMarkupAssembleType",
                                                        "type": "select",
                                                        "label": "Enter/Assemble the Reply Markup Field",
                                                        "validate": {
                                                            "enum": [
                                                                "reply_markup_enter",
                                                                "reply_markup_assemble"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "replyMarkup",
                                                        "type": "text",
                                                        "label": "Reply Markup"
                                                    }
                                                ]
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "flow": [
                        {
                            "id": 208,
                            "module": "builtin:BasicRouter",
                            "version": 1,
                            "filter": {
                                "name": "Голос",
                                "conditions": [
                                    [
                                        {
                                            "a": "{{189.message.voice.mime_type}}",
                                            "o": "text:equal",
                                            "b": "audio/ogg"
                                        }
                                    ]
                                ]
                            },
                            "mapper": null,
                            "metadata": {
                                "designer": {
                                    "x": 1800,
                                    "y": 750,
                                    "name": "Есть Thread ID / Нет Thread ID"
                                }
                            },
                            "routes": [
                                {
                                    "flow": [
                                        {
                                            "id": 206,
                                            "module": "telegram:DownloadFile",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3724557
                                            },
                                            "filter": {
                                                "name": "Есть Пользователь",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{196.text}}",
                                                            "o": "exist"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": {
                                                "fileId": "{{189.message.voice.file_id}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2100,
                                                    "y": 600,
                                                    "name": "Скачивает ГС"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "telegram"
                                                            },
                                                            "label": "Тест для ковчега"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:telegram",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "fileId",
                                                        "type": "text",
                                                        "label": "File ID",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "fileId",
                                                        "type": "text",
                                                        "label": "File ID",
                                                        "required": true
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 30,
                                            "module": "openai-gpt-3:CreateTranscription",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3446305
                                            },
                                            "mapper": {
                                                "model": "whisper-1",
                                                "fileData": "{{206.fileOutput}}",
                                                "fileName": "{{206.fileName}}",
                                                "language": "ru",
                                                "temperature": "1",
                                                "response_format": "json"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2400,
                                                    "y": 600,
                                                    "name": "Транскрибация"
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "Whisper-1"
                                                        },
                                                        "response_format": {
                                                            "mode": "chose",
                                                            "label": "JSON"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            },
                                                            "label": "ProducerBBR_GPT"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "fileName",
                                                        "type": "filename",
                                                        "label": "File Name",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "fileData",
                                                        "type": "buffer",
                                                        "label": "File Data",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "prompt",
                                                        "type": "text",
                                                        "label": "Prompt"
                                                    },
                                                    {
                                                        "name": "response_format",
                                                        "type": "select",
                                                        "label": "Response Format",
                                                        "validate": {
                                                            "enum": [
                                                                "json",
                                                                "text",
                                                                "srt",
                                                                "verbose_json",
                                                                "vtt"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "language",
                                                        "type": "text",
                                                        "label": "Language"
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "text",
                                                        "type": "text",
                                                        "label": "Text"
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 207,
                                            "module": "openai-gpt-3:messageAssistantAdvanced",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3446305
                                            },
                                            "mapper": {
                                                "assistantId": "asst_3ihplvuKuyFLoyxylCz9UUcK",
                                                "role": "assistant",
                                                "threadId": "{{196.text}}",
                                                "tools": [
                                                    "file_search"
                                                ],
                                                "file_search_resources": "{{239.text}}",
                                                "tool_choice": "auto",
                                                "response_format": "auto",
                                                "truncation_strategy": "auto",
                                                "message": "{{30.text}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2700,
                                                    "y": 600,
                                                    "name": "Ассистент ГС"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "ProducerBBR_GPT",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "assistantId": {
                                                            "mode": "chose",
                                                            "nested": [],
                                                            "label": "Тест ковчег (gpt-4o-mini)"
                                                        },
                                                        "role": {
                                                            "label": "Assistant"
                                                        },
                                                        "model": {
                                                            "mode": "chose"
                                                        },
                                                        "tools": {
                                                            "mode": "chose"
                                                        },
                                                        "file_search_resources": {
                                                            "mode": "edit"
                                                        },
                                                        "code_interpreter_resources": {
                                                            "mode": "chose"
                                                        },
                                                        "tool_choice": {
                                                            "mode": "chose",
                                                            "label": "Auto"
                                                        },
                                                        "response_format": {
                                                            "mode": "chose",
                                                            "label": "Auto"
                                                        },
                                                        "truncation_strategy": {
                                                            "mode": "chose",
                                                            "label": "Auto"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "assistantId",
                                                        "type": "select",
                                                        "label": "Assistant",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "role",
                                                        "type": "select",
                                                        "label": "Role",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "user",
                                                                "assistant"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "threadId",
                                                        "type": "text",
                                                        "label": "Thread ID"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model"
                                                    },
                                                    {
                                                        "name": "tools",
                                                        "type": "select",
                                                        "label": "Tools",
                                                        "multiple": true,
                                                        "validate": {
                                                            "enum": [
                                                                "file_search",
                                                                "code_interpreter"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "file_search_resources",
                                                        "type": "select",
                                                        "label": "File Search Resources"
                                                    },
                                                    {
                                                        "name": "code_interpreter_resources",
                                                        "type": "select",
                                                        "label": "Code Interpreter Resources",
                                                        "validate": {
                                                            "maxItems": 20
                                                        },
                                                        "multiple": true
                                                    },
                                                    {
                                                        "name": "tool_choice",
                                                        "type": "select",
                                                        "label": "Tool Choice",
                                                        "validate": {
                                                            "enum": [
                                                                "none",
                                                                "auto",
                                                                "required",
                                                                "file_search",
                                                                "code_interpreter",
                                                                "function"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "instructions",
                                                        "type": "text",
                                                        "label": "Instructions"
                                                    },
                                                    {
                                                        "name": "max_prompt_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Prompt Tokens"
                                                    },
                                                    {
                                                        "name": "max_completion_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Completion Tokens"
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "top_p",
                                                        "type": "number",
                                                        "label": "Top P",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "response_format",
                                                        "type": "select",
                                                        "label": "Response Format",
                                                        "validate": {
                                                            "enum": [
                                                                "auto",
                                                                "json_object",
                                                                "text"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "truncation_strategy",
                                                        "type": "select",
                                                        "label": "Truncation Strategy",
                                                        "validate": {
                                                            "enum": [
                                                                "auto",
                                                                "last_messages"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "message",
                                                        "type": "text",
                                                        "label": "Message",
                                                        "required": true
                                                    }
                                                ],
                                                "advanced": true
                                            }
                                        },
                                        {
                                            "id": 71,
                                            "module": "telegram:SendReplyMessage",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3724557
                                            },
                                            "mapper": {
                                                "chatId": "{{189.message.from.id}}",
                                                "text": "{{207.result}}",
                                                "messageThreadId": "",
                                                "parseMode": "HTML",
                                                "replyToMessageId": "",
                                                "replyMarkupAssembleType": "reply_markup_enter",
                                                "replyMarkup": ""
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3000,
                                                    "y": 600,
                                                    "name": "Отправка пользователю"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "Тест для ковчега",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "telegram"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "parseMode": {
                                                            "label": "HTML"
                                                        },
                                                        "disableNotification": {
                                                            "mode": "chose"
                                                        },
                                                        "replyMarkupAssembleType": {
                                                            "label": "Enter the Reply Markup"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:telegram",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "chatId",
                                                        "type": "text",
                                                        "label": "Chat ID",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "text",
                                                        "type": "text",
                                                        "label": "Text",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "messageThreadId",
                                                        "type": "number",
                                                        "label": "Message Thread ID"
                                                    },
                                                    {
                                                        "name": "parseMode",
                                                        "type": "select",
                                                        "label": "Parse Mode",
                                                        "validate": {
                                                            "enum": [
                                                                "Markdown",
                                                                "HTML"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "disableNotification",
                                                        "type": "boolean",
                                                        "label": "Disable Notifications"
                                                    },
                                                    {
                                                        "name": "disableWebPagePreview",
                                                        "type": "boolean",
                                                        "label": "Disable Link Previews"
                                                    },
                                                    {
                                                        "name": "replyToMessageId",
                                                        "type": "number",
                                                        "label": "Original Message ID"
                                                    },
                                                    {
                                                        "name": "replyMarkupAssembleType",
                                                        "type": "select",
                                                        "label": "Enter/Assemble the Reply Markup Field",
                                                        "validate": {
                                                            "enum": [
                                                                "reply_markup_enter",
                                                                "reply_markup_assemble"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "replyMarkup",
                                                        "type": "text",
                                                        "label": "Reply Markup"
                                                    }
                                                ]
                                            }
                                        }
                                    ]
                                },
                                {
                                    "flow": [
                                        {
                                            "id": 209,
                                            "module": "telegram:DownloadFile",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3724557
                                            },
                                            "filter": {
                                                "name": "Новый Пользователь",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{196.text}}",
                                                            "o": "notexist"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": {
                                                "fileId": "{{189.message.voice.file_id}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2100,
                                                    "y": 900,
                                                    "name": "Скачивает ГС"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "telegram"
                                                            },
                                                            "label": "Тест для ковчега"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:telegram",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "fileId",
                                                        "type": "text",
                                                        "label": "File ID",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "fileId",
                                                        "type": "text",
                                                        "label": "File ID",
                                                        "required": true
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 240,
                                            "module": "openai-gpt-3:createVectorStoreFileBatch",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3446305
                                            },
                                            "mapper": {
                                                "createMode": "create",
                                                "fileIds": [
                                                    "file-6Z3fG1vye74W7UZHrJB2Rh"
                                                ],
                                                "vs_name": "telegram_store{{189.message.from.id}}",
                                                "days_expires_after": "365"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2400,
                                                    "y": 900,
                                                    "name": "Создание Vector store"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "ProducerBBR_GPT",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "createMode": {
                                                            "mode": "chose",
                                                            "label": "Create New Vector Store"
                                                        },
                                                        "fileIds": {
                                                            "mode": "chose",
                                                            "label": [
                                                                "info.txt"
                                                            ]
                                                        },
                                                        "metadata": {
                                                            "mode": "chose"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "createMode",
                                                        "type": "select",
                                                        "label": "Batch Create Mode",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "choose",
                                                                "create"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "fileIds",
                                                        "type": "select",
                                                        "label": "File IDs",
                                                        "required": true,
                                                        "multiple": true
                                                    },
                                                    {
                                                        "name": "vs_name",
                                                        "type": "text",
                                                        "label": "Vector Store Name",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "days_expires_after",
                                                        "type": "uinteger",
                                                        "label": "Days Expires After"
                                                    },
                                                    {
                                                        "name": "metadata",
                                                        "type": "array",
                                                        "label": "Metadata",
                                                        "validate": {
                                                            "maxItems": 16
                                                        },
                                                        "spec": {
                                                            "spec": [
                                                                {
                                                                    "name": "key",
                                                                    "type": "text",
                                                                    "label": "Key",
                                                                    "required": true,
                                                                    "validate": {
                                                                        "max": 64
                                                                    }
                                                                },
                                                                {
                                                                    "name": "value",
                                                                    "type": "text",
                                                                    "label": "Value",
                                                                    "required": true,
                                                                    "validate": {
                                                                        "max": 512
                                                                    }
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Metadata",
                                                            "name": "value"
                                                        }
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 210,
                                            "module": "openai-gpt-3:CreateTranscription",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3446305
                                            },
                                            "mapper": {
                                                "model": "whisper-1",
                                                "fileData": "{{209.fileOutput}}",
                                                "fileName": "{{209.fileName}}",
                                                "language": "ru",
                                                "temperature": "1",
                                                "response_format": "json"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2700,
                                                    "y": 900,
                                                    "name": "Транскрибация"
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "Whisper-1"
                                                        },
                                                        "response_format": {
                                                            "mode": "chose",
                                                            "label": "JSON"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            },
                                                            "label": "ProducerBBR_GPT"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "fileName",
                                                        "type": "filename",
                                                        "label": "File Name",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "fileData",
                                                        "type": "buffer",
                                                        "label": "File Data",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "prompt",
                                                        "type": "text",
                                                        "label": "Prompt"
                                                    },
                                                    {
                                                        "name": "response_format",
                                                        "type": "select",
                                                        "label": "Response Format",
                                                        "validate": {
                                                            "enum": [
                                                                "json",
                                                                "text",
                                                                "srt",
                                                                "verbose_json",
                                                                "vtt"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "language",
                                                        "type": "text",
                                                        "label": "Language"
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "text",
                                                        "type": "text",
                                                        "label": "Text"
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 211,
                                            "module": "openai-gpt-3:messageAssistantAdvanced",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3446305
                                            },
                                            "mapper": {
                                                "assistantId": "asst_3ihplvuKuyFLoyxylCz9UUcK",
                                                "role": "assistant",
                                                "tool_choice": "auto",
                                                "message": "{{210.text}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3000,
                                                    "y": 900,
                                                    "name": "Ассистент ГС"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "ProducerBBR_GPT",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "assistantId": {
                                                            "mode": "chose",
                                                            "nested": [],
                                                            "label": "Тест ковчег (gpt-4o-mini)"
                                                        },
                                                        "role": {
                                                            "label": "Assistant"
                                                        },
                                                        "model": {
                                                            "mode": "chose"
                                                        },
                                                        "tools": {
                                                            "mode": "chose"
                                                        },
                                                        "file_search_resources": {
                                                            "mode": "chose"
                                                        },
                                                        "code_interpreter_resources": {
                                                            "mode": "chose"
                                                        },
                                                        "tool_choice": {
                                                            "mode": "chose",
                                                            "label": "Auto"
                                                        },
                                                        "response_format": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        },
                                                        "truncation_strategy": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "assistantId",
                                                        "type": "select",
                                                        "label": "Assistant",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "role",
                                                        "type": "select",
                                                        "label": "Role",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "user",
                                                                "assistant"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "threadId",
                                                        "type": "text",
                                                        "label": "Thread ID"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model"
                                                    },
                                                    {
                                                        "name": "tools",
                                                        "type": "select",
                                                        "label": "Tools",
                                                        "multiple": true,
                                                        "validate": {
                                                            "enum": [
                                                                "file_search",
                                                                "code_interpreter"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "file_search_resources",
                                                        "type": "select",
                                                        "label": "File Search Resources"
                                                    },
                                                    {
                                                        "name": "code_interpreter_resources",
                                                        "type": "select",
                                                        "label": "Code Interpreter Resources",
                                                        "validate": {
                                                            "maxItems": 20
                                                        },
                                                        "multiple": true
                                                    },
                                                    {
                                                        "name": "tool_choice",
                                                        "type": "select",
                                                        "label": "Tool Choice",
                                                        "validate": {
                                                            "enum": [
                                                                "none",
                                                                "auto",
                                                                "required",
                                                                "file_search",
                                                                "code_interpreter",
                                                                "function"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "instructions",
                                                        "type": "text",
                                                        "label": "Instructions"
                                                    },
                                                    {
                                                        "name": "max_prompt_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Prompt Tokens"
                                                    },
                                                    {
                                                        "name": "max_completion_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Completion Tokens"
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "top_p",
                                                        "type": "number",
                                                        "label": "Top P",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "response_format",
                                                        "type": "select",
                                                        "label": "Response Format",
                                                        "validate": {
                                                            "enum": [
                                                                "auto",
                                                                "json_object",
                                                                "text"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "truncation_strategy",
                                                        "type": "select",
                                                        "label": "Truncation Strategy",
                                                        "validate": {
                                                            "enum": [
                                                                "auto",
                                                                "last_messages"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "message",
                                                        "type": "text",
                                                        "label": "Message",
                                                        "required": true
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 213,
                                            "module": "datastore:AddRecord",
                                            "version": 1,
                                            "parameters": {
                                                "datastore": 59056
                                            },
                                            "mapper": {
                                                "key": "",
                                                "overwrite": false,
                                                "data": {
                                                    "ID User": "{{189.message.from.id}}",
                                                    "Thread ID": "{{211.thread_id}}",
                                                    "Vector store": ""
                                                }
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3300,
                                                    "y": 900,
                                                    "name": "Записывает Thread ID"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "datastore": {
                                                            "label": "Ковчег"
                                                        }
                                                    },
                                                    "expect": {
                                                        "overwrite": {
                                                            "mode": "chose"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "datastore",
                                                        "type": "datastore",
                                                        "label": "Data store",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "key",
                                                        "type": "text",
                                                        "label": "Key"
                                                    },
                                                    {
                                                        "name": "overwrite",
                                                        "type": "boolean",
                                                        "label": "Overwrite an existing record",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "data",
                                                        "type": "collection",
                                                        "label": "Record",
                                                        "spec": [
                                                            {
                                                                "name": "ID User",
                                                                "type": "text",
                                                                "label": null
                                                            },
                                                            {
                                                                "name": "Thread ID",
                                                                "type": "text",
                                                                "label": null
                                                            },
                                                            {
                                                                "name": "Vector store",
                                                                "type": "text",
                                                                "label": null
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 242,
                                            "module": "datastore:AddRecord",
                                            "version": 1,
                                            "parameters": {
                                                "datastore": 59056
                                            },
                                            "mapper": {
                                                "key": "",
                                                "overwrite": false,
                                                "data": {
                                                    "ID User": "{{189.message.from.id}}",
                                                    "Thread ID": "",
                                                    "Vector store": "{{240.vector_store_id}}"
                                                }
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3600,
                                                    "y": 900,
                                                    "name": "Записывает Vector store"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "datastore": {
                                                            "label": "Ковчег"
                                                        }
                                                    },
                                                    "expect": {
                                                        "overwrite": {
                                                            "mode": "chose"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "datastore",
                                                        "type": "datastore",
                                                        "label": "Data store",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "key",
                                                        "type": "text",
                                                        "label": "Key"
                                                    },
                                                    {
                                                        "name": "overwrite",
                                                        "type": "boolean",
                                                        "label": "Overwrite an existing record",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "data",
                                                        "type": "collection",
                                                        "label": "Record",
                                                        "spec": [
                                                            {
                                                                "name": "ID User",
                                                                "type": "text",
                                                                "label": null
                                                            },
                                                            {
                                                                "name": "Thread ID",
                                                                "type": "text",
                                                                "label": null
                                                            },
                                                            {
                                                                "name": "Vector store",
                                                                "type": "text",
                                                                "label": null
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 212,
                                            "module": "telegram:SendReplyMessage",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3724557
                                            },
                                            "mapper": {
                                                "text": "{{211.result}}",
                                                "chatId": "{{189.message.from.id}}",
                                                "parseMode": "HTML",
                                                "replyMarkup": "",
                                                "messageThreadId": "",
                                                "replyToMessageId": "",
                                                "replyMarkupAssembleType": "reply_markup_enter"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3900,
                                                    "y": 900,
                                                    "name": "Отправка пользователю"
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "parseMode": {
                                                            "label": "HTML"
                                                        },
                                                        "disableNotification": {
                                                            "mode": "chose"
                                                        },
                                                        "replyMarkupAssembleType": {
                                                            "label": "Enter the Reply Markup"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "telegram"
                                                            },
                                                            "label": "Тест для ковчега"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:telegram",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "chatId",
                                                        "type": "text",
                                                        "label": "Chat ID",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "text",
                                                        "type": "text",
                                                        "label": "Text",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "messageThreadId",
                                                        "type": "number",
                                                        "label": "Message Thread ID"
                                                    },
                                                    {
                                                        "name": "parseMode",
                                                        "type": "select",
                                                        "label": "Parse Mode",
                                                        "validate": {
                                                            "enum": [
                                                                "Markdown",
                                                                "HTML"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "disableNotification",
                                                        "type": "boolean",
                                                        "label": "Disable Notifications"
                                                    },
                                                    {
                                                        "name": "disableWebPagePreview",
                                                        "type": "boolean",
                                                        "label": "Disable Link Previews"
                                                    },
                                                    {
                                                        "name": "replyToMessageId",
                                                        "type": "number",
                                                        "label": "Original Message ID"
                                                    },
                                                    {
                                                        "name": "replyMarkupAssembleType",
                                                        "type": "select",
                                                        "label": "Enter/Assemble the Reply Markup Field",
                                                        "validate": {
                                                            "enum": [
                                                                "reply_markup_enter",
                                                                "reply_markup_assemble"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "replyMarkup",
                                                        "type": "text",
                                                        "label": "Reply Markup"
                                                    }
                                                ]
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "flow": [
                        {
                            "id": 218,
                            "module": "builtin:BasicRouter",
                            "version": 1,
                            "filter": {
                                "name": "Картинка",
                                "conditions": [
                                    [
                                        {
                                            "a": "{{189.message.photo[].file_id}}",
                                            "o": "exist"
                                        }
                                    ]
                                ]
                            },
                            "mapper": null,
                            "metadata": {
                                "designer": {
                                    "x": 1800,
                                    "y": 1350,
                                    "name": "Есть Thread ID / Нет Thread ID"
                                }
                            },
                            "routes": [
                                {
                                    "flow": [
                                        {
                                            "id": 214,
                                            "module": "telegram:DownloadFile",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3724557
                                            },
                                            "filter": {
                                                "name": "Новый Пользователь",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{196.text}}",
                                                            "o": "notexist"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": {
                                                "fileId": "{{189.message.photo[].file_id}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2100,
                                                    "y": 1200,
                                                    "name": "Скачивает картинку"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "telegram"
                                                            },
                                                            "label": "Тест для ковчега"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:telegram",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "fileId",
                                                        "type": "text",
                                                        "label": "File ID",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "fileId",
                                                        "type": "text",
                                                        "label": "File ID",
                                                        "required": true
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 241,
                                            "module": "openai-gpt-3:createVectorStoreFileBatch",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3446305
                                            },
                                            "mapper": {
                                                "createMode": "create",
                                                "fileIds": [
                                                    "file-6Z3fG1vye74W7UZHrJB2Rh"
                                                ],
                                                "vs_name": "telegram_store{{189.message.from.id}}",
                                                "days_expires_after": "365"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2400,
                                                    "y": 1200,
                                                    "name": "Создание Vector store"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "ProducerBBR_GPT",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "createMode": {
                                                            "mode": "chose",
                                                            "label": "Create New Vector Store"
                                                        },
                                                        "fileIds": {
                                                            "mode": "chose",
                                                            "label": [
                                                                "info.txt"
                                                            ]
                                                        },
                                                        "metadata": {
                                                            "mode": "chose"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "createMode",
                                                        "type": "select",
                                                        "label": "Batch Create Mode",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "choose",
                                                                "create"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "fileIds",
                                                        "type": "select",
                                                        "label": "File IDs",
                                                        "required": true,
                                                        "multiple": true
                                                    },
                                                    {
                                                        "name": "vs_name",
                                                        "type": "text",
                                                        "label": "Vector Store Name",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "days_expires_after",
                                                        "type": "uinteger",
                                                        "label": "Days Expires After"
                                                    },
                                                    {
                                                        "name": "metadata",
                                                        "type": "array",
                                                        "label": "Metadata",
                                                        "validate": {
                                                            "maxItems": 16
                                                        },
                                                        "spec": {
                                                            "spec": [
                                                                {
                                                                    "name": "key",
                                                                    "type": "text",
                                                                    "label": "Key",
                                                                    "required": true,
                                                                    "validate": {
                                                                        "max": 64
                                                                    }
                                                                },
                                                                {
                                                                    "name": "value",
                                                                    "type": "text",
                                                                    "label": "Value",
                                                                    "required": true,
                                                                    "validate": {
                                                                        "max": 512
                                                                    }
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Metadata",
                                                            "name": "value"
                                                        }
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 215,
                                            "module": "openai-gpt-3:analyzeImages",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3446305
                                            },
                                            "mapper": {
                                                "model": "gpt-4o-mini-2024-07-18",
                                                "top_p": "1",
                                                "images": [
                                                    {
                                                        "imageFileData": "{{214.fileOutput}}",
                                                        "imageUploadType": "imageFile"
                                                    }
                                                ],
                                                "prompt": "расскажи что на фото. если на фотографии текст то просто нужно отправить его дальше!",
                                                "max_tokens": "2048",
                                                "temperature": "1",
                                                "n_completions": "1"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2700,
                                                    "y": 1200,
                                                    "name": "Анализ картинки"
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "gpt-4o-mini-2024-07-18"
                                                        },
                                                        "images": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "imageUploadType": {
                                                                        "mode": "chose",
                                                                        "label": "Image File"
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            },
                                                            "label": "ProducerBBR_GPT"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "prompt",
                                                        "type": "text",
                                                        "label": "Prompt",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "images",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "imageUploadType",
                                                                    "type": "select",
                                                                    "label": "How would you like to specify an image?",
                                                                    "options": [
                                                                        {
                                                                            "label": "Image URL",
                                                                            "value": "url",
                                                                            "nested": [
                                                                                {
                                                                                    "help": "Public URL of the image. For example, `https://getmyimage.com/myimage.png`.",
                                                                                    "mode": "edit",
                                                                                    "name": "imageUrl",
                                                                                    "type": "url",
                                                                                    "label": "Image URL",
                                                                                    "mappable": {
                                                                                        "help": "Public URL of the image. For example, `https://getmyimage.com/myimage.png`."
                                                                                    },
                                                                                    "required": true
                                                                                }
                                                                            ],
                                                                            "default": true
                                                                        },
                                                                        {
                                                                            "label": "Image File",
                                                                            "value": "imageFile",
                                                                            "nested": [
                                                                                {
                                                                                    "help": "Binary data of the image. For example, you can retrieve the binary data of your image using the __HTTP: Get a file__ module.",
                                                                                    "name": "imageFileData",
                                                                                    "type": "buffer",
                                                                                    "label": "Image File",
                                                                                    "required": true,
                                                                                    "semantic": "file:data"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "required": true
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Image"
                                                        },
                                                        "type": "array",
                                                        "label": "Images",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "max_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Completion Tokens"
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "top_p",
                                                        "type": "number",
                                                        "label": "Top P",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "n_completions",
                                                        "type": "number",
                                                        "label": "Number"
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 223,
                                            "module": "openai-gpt-3:messageAssistantAdvanced",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3446305
                                            },
                                            "mapper": {
                                                "assistantId": "asst_3ihplvuKuyFLoyxylCz9UUcK",
                                                "role": "assistant",
                                                "tool_choice": "auto",
                                                "message": "Ты получаешь результат от модуля анализа фотографии. {{215.result}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3000,
                                                    "y": 1200,
                                                    "name": "Ассистент Картинка"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "ProducerBBR_GPT",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "assistantId": {
                                                            "mode": "chose",
                                                            "nested": [],
                                                            "label": "Тест ковчег (gpt-4o-mini)"
                                                        },
                                                        "role": {
                                                            "label": "Assistant"
                                                        },
                                                        "model": {
                                                            "mode": "chose"
                                                        },
                                                        "tools": {
                                                            "mode": "chose"
                                                        },
                                                        "file_search_resources": {
                                                            "mode": "chose"
                                                        },
                                                        "code_interpreter_resources": {
                                                            "mode": "chose"
                                                        },
                                                        "tool_choice": {
                                                            "mode": "chose",
                                                            "label": "Auto"
                                                        },
                                                        "response_format": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        },
                                                        "truncation_strategy": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "assistantId",
                                                        "type": "select",
                                                        "label": "Assistant",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "role",
                                                        "type": "select",
                                                        "label": "Role",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "user",
                                                                "assistant"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "threadId",
                                                        "type": "text",
                                                        "label": "Thread ID"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model"
                                                    },
                                                    {
                                                        "name": "tools",
                                                        "type": "select",
                                                        "label": "Tools",
                                                        "multiple": true,
                                                        "validate": {
                                                            "enum": [
                                                                "file_search",
                                                                "code_interpreter"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "file_search_resources",
                                                        "type": "select",
                                                        "label": "File Search Resources"
                                                    },
                                                    {
                                                        "name": "code_interpreter_resources",
                                                        "type": "select",
                                                        "label": "Code Interpreter Resources",
                                                        "validate": {
                                                            "maxItems": 20
                                                        },
                                                        "multiple": true
                                                    },
                                                    {
                                                        "name": "tool_choice",
                                                        "type": "select",
                                                        "label": "Tool Choice",
                                                        "validate": {
                                                            "enum": [
                                                                "none",
                                                                "auto",
                                                                "required",
                                                                "file_search",
                                                                "code_interpreter",
                                                                "function"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "instructions",
                                                        "type": "text",
                                                        "label": "Instructions"
                                                    },
                                                    {
                                                        "name": "max_prompt_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Prompt Tokens"
                                                    },
                                                    {
                                                        "name": "max_completion_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Completion Tokens"
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "top_p",
                                                        "type": "number",
                                                        "label": "Top P",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "response_format",
                                                        "type": "select",
                                                        "label": "Response Format",
                                                        "validate": {
                                                            "enum": [
                                                                "auto",
                                                                "json_object",
                                                                "text"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "truncation_strategy",
                                                        "type": "select",
                                                        "label": "Truncation Strategy",
                                                        "validate": {
                                                            "enum": [
                                                                "auto",
                                                                "last_messages"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "message",
                                                        "type": "text",
                                                        "label": "Message",
                                                        "required": true
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 225,
                                            "module": "datastore:AddRecord",
                                            "version": 1,
                                            "parameters": {
                                                "datastore": 59056
                                            },
                                            "mapper": {
                                                "key": "",
                                                "overwrite": false,
                                                "data": {
                                                    "ID User": "{{189.message.from.id}}",
                                                    "Thread ID": "{{223.thread_id}}",
                                                    "Vector store": ""
                                                }
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3300,
                                                    "y": 1200,
                                                    "name": "Записывает Thread ID"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "datastore": {
                                                            "label": "Ковчег"
                                                        }
                                                    },
                                                    "expect": {
                                                        "overwrite": {
                                                            "mode": "chose"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "datastore",
                                                        "type": "datastore",
                                                        "label": "Data store",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "key",
                                                        "type": "text",
                                                        "label": "Key"
                                                    },
                                                    {
                                                        "name": "overwrite",
                                                        "type": "boolean",
                                                        "label": "Overwrite an existing record",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "data",
                                                        "type": "collection",
                                                        "label": "Record",
                                                        "spec": [
                                                            {
                                                                "name": "ID User",
                                                                "type": "text",
                                                                "label": null
                                                            },
                                                            {
                                                                "name": "Thread ID",
                                                                "type": "text",
                                                                "label": null
                                                            },
                                                            {
                                                                "name": "Vector store",
                                                                "type": "text",
                                                                "label": null
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 243,
                                            "module": "datastore:AddRecord",
                                            "version": 1,
                                            "parameters": {
                                                "datastore": 59056
                                            },
                                            "mapper": {
                                                "key": "",
                                                "overwrite": false,
                                                "data": {
                                                    "ID User": "{{189.message.from.id}}",
                                                    "Thread ID": "",
                                                    "Vector store": "{{241.vector_store_id}}"
                                                }
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3600,
                                                    "y": 1200,
                                                    "name": "Записывает Vector store"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "datastore": {
                                                            "label": "Ковчег"
                                                        }
                                                    },
                                                    "expect": {
                                                        "overwrite": {
                                                            "mode": "chose"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "datastore",
                                                        "type": "datastore",
                                                        "label": "Data store",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "key",
                                                        "type": "text",
                                                        "label": "Key"
                                                    },
                                                    {
                                                        "name": "overwrite",
                                                        "type": "boolean",
                                                        "label": "Overwrite an existing record",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "data",
                                                        "type": "collection",
                                                        "label": "Record",
                                                        "spec": [
                                                            {
                                                                "name": "ID User",
                                                                "type": "text",
                                                                "label": null
                                                            },
                                                            {
                                                                "name": "Thread ID",
                                                                "type": "text",
                                                                "label": null
                                                            },
                                                            {
                                                                "name": "Vector store",
                                                                "type": "text",
                                                                "label": null
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 217,
                                            "module": "telegram:SendReplyMessage",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3724557
                                            },
                                            "mapper": {
                                                "text": "{{223.result}}",
                                                "chatId": "{{189.message.from.id}}",
                                                "parseMode": "HTML",
                                                "replyMarkup": "",
                                                "messageThreadId": "",
                                                "replyToMessageId": "",
                                                "replyMarkupAssembleType": "reply_markup_enter"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3900,
                                                    "y": 1200,
                                                    "name": "Отправка пользователю"
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "parseMode": {
                                                            "label": "HTML"
                                                        },
                                                        "disableNotification": {
                                                            "mode": "chose"
                                                        },
                                                        "replyMarkupAssembleType": {
                                                            "label": "Enter the Reply Markup"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "telegram"
                                                            },
                                                            "label": "Тест для ковчега"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:telegram",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "chatId",
                                                        "type": "text",
                                                        "label": "Chat ID",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "text",
                                                        "type": "text",
                                                        "label": "Text",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "messageThreadId",
                                                        "type": "number",
                                                        "label": "Message Thread ID"
                                                    },
                                                    {
                                                        "name": "parseMode",
                                                        "type": "select",
                                                        "label": "Parse Mode",
                                                        "validate": {
                                                            "enum": [
                                                                "Markdown",
                                                                "HTML"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "disableNotification",
                                                        "type": "boolean",
                                                        "label": "Disable Notifications"
                                                    },
                                                    {
                                                        "name": "disableWebPagePreview",
                                                        "type": "boolean",
                                                        "label": "Disable Link Previews"
                                                    },
                                                    {
                                                        "name": "replyToMessageId",
                                                        "type": "number",
                                                        "label": "Original Message ID"
                                                    },
                                                    {
                                                        "name": "replyMarkupAssembleType",
                                                        "type": "select",
                                                        "label": "Enter/Assemble the Reply Markup Field",
                                                        "validate": {
                                                            "enum": [
                                                                "reply_markup_enter",
                                                                "reply_markup_assemble"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "replyMarkup",
                                                        "type": "text",
                                                        "label": "Reply Markup"
                                                    }
                                                ]
                                            }
                                        }
                                    ]
                                },
                                {
                                    "flow": [
                                        {
                                            "id": 219,
                                            "module": "telegram:DownloadFile",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3724557
                                            },
                                            "filter": {
                                                "name": "Есть Пользователь",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{196.text}}",
                                                            "o": "exist"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": {
                                                "fileId": "{{189.message.photo[].file_id}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2100,
                                                    "y": 1500,
                                                    "name": "Скачивает картинку"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "telegram"
                                                            },
                                                            "label": "Тест для ковчега"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:telegram",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "fileId",
                                                        "type": "text",
                                                        "label": "File ID",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "fileId",
                                                        "type": "text",
                                                        "label": "File ID",
                                                        "required": true
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 220,
                                            "module": "openai-gpt-3:analyzeImages",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3446305
                                            },
                                            "mapper": {
                                                "model": "gpt-4o-mini-2024-07-18",
                                                "top_p": "1",
                                                "images": [
                                                    {
                                                        "imageFileData": "{{219.fileOutput}}",
                                                        "imageUploadType": "imageFile"
                                                    }
                                                ],
                                                "prompt": "расскажи что на фото. если на фотографии текст то просто нужно отправить его дальше!",
                                                "max_tokens": "2048",
                                                "temperature": "1",
                                                "n_completions": "1"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2400,
                                                    "y": 1500,
                                                    "name": "Анализ картинки"
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "gpt-4o-mini-2024-07-18"
                                                        },
                                                        "images": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "imageUploadType": {
                                                                        "mode": "chose",
                                                                        "label": "Image File"
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            },
                                                            "label": "ProducerBBR_GPT"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "prompt",
                                                        "type": "text",
                                                        "label": "Prompt",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "images",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "imageUploadType",
                                                                    "type": "select",
                                                                    "label": "How would you like to specify an image?",
                                                                    "options": [
                                                                        {
                                                                            "label": "Image URL",
                                                                            "value": "url",
                                                                            "nested": [
                                                                                {
                                                                                    "help": "Public URL of the image. For example, `https://getmyimage.com/myimage.png`.",
                                                                                    "mode": "edit",
                                                                                    "name": "imageUrl",
                                                                                    "type": "url",
                                                                                    "label": "Image URL",
                                                                                    "mappable": {
                                                                                        "help": "Public URL of the image. For example, `https://getmyimage.com/myimage.png`."
                                                                                    },
                                                                                    "required": true
                                                                                }
                                                                            ],
                                                                            "default": true
                                                                        },
                                                                        {
                                                                            "label": "Image File",
                                                                            "value": "imageFile",
                                                                            "nested": [
                                                                                {
                                                                                    "help": "Binary data of the image. For example, you can retrieve the binary data of your image using the __HTTP: Get a file__ module.",
                                                                                    "name": "imageFileData",
                                                                                    "type": "buffer",
                                                                                    "label": "Image File",
                                                                                    "required": true,
                                                                                    "semantic": "file:data"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ],
                                                                    "required": true
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Image"
                                                        },
                                                        "type": "array",
                                                        "label": "Images",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "max_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Completion Tokens"
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "top_p",
                                                        "type": "number",
                                                        "label": "Top P",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "n_completions",
                                                        "type": "number",
                                                        "label": "Number"
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 224,
                                            "module": "openai-gpt-3:messageAssistantAdvanced",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3446305
                                            },
                                            "mapper": {
                                                "assistantId": "asst_epfuhGQZCLJpgPi2sPZBGqQx",
                                                "role": "assistant",
                                                "threadId": "{{196.text}}",
                                                "tools": [
                                                    "file_search"
                                                ],
                                                "file_search_resources": "{{239.text}}",
                                                "tool_choice": "auto",
                                                "message": "Ты получаешь результат от модуля анализа фотографии. {{220.result}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2700,
                                                    "y": 1500,
                                                    "name": "Ассистент Картинка"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "ProducerBBR_GPT",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "assistantId": {
                                                            "mode": "chose",
                                                            "nested": [],
                                                            "label": "Тест ковчег (gpt-4o-mini)"
                                                        },
                                                        "role": {
                                                            "label": "Assistant"
                                                        },
                                                        "model": {
                                                            "mode": "chose"
                                                        },
                                                        "tools": {
                                                            "mode": "chose"
                                                        },
                                                        "file_search_resources": {
                                                            "mode": "edit"
                                                        },
                                                        "code_interpreter_resources": {
                                                            "mode": "chose"
                                                        },
                                                        "tool_choice": {
                                                            "mode": "chose",
                                                            "label": "Auto"
                                                        },
                                                        "response_format": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        },
                                                        "truncation_strategy": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "assistantId",
                                                        "type": "select",
                                                        "label": "Assistant",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "role",
                                                        "type": "select",
                                                        "label": "Role",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "user",
                                                                "assistant"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "threadId",
                                                        "type": "text",
                                                        "label": "Thread ID"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model"
                                                    },
                                                    {
                                                        "name": "tools",
                                                        "type": "select",
                                                        "label": "Tools",
                                                        "multiple": true,
                                                        "validate": {
                                                            "enum": [
                                                                "file_search",
                                                                "code_interpreter"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "file_search_resources",
                                                        "type": "select",
                                                        "label": "File Search Resources"
                                                    },
                                                    {
                                                        "name": "code_interpreter_resources",
                                                        "type": "select",
                                                        "label": "Code Interpreter Resources",
                                                        "validate": {
                                                            "maxItems": 20
                                                        },
                                                        "multiple": true
                                                    },
                                                    {
                                                        "name": "tool_choice",
                                                        "type": "select",
                                                        "label": "Tool Choice",
                                                        "validate": {
                                                            "enum": [
                                                                "none",
                                                                "auto",
                                                                "required",
                                                                "file_search",
                                                                "code_interpreter",
                                                                "function"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "instructions",
                                                        "type": "text",
                                                        "label": "Instructions"
                                                    },
                                                    {
                                                        "name": "max_prompt_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Prompt Tokens"
                                                    },
                                                    {
                                                        "name": "max_completion_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Completion Tokens"
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "top_p",
                                                        "type": "number",
                                                        "label": "Top P",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "response_format",
                                                        "type": "select",
                                                        "label": "Response Format",
                                                        "validate": {
                                                            "enum": [
                                                                "auto",
                                                                "json_object",
                                                                "text"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "truncation_strategy",
                                                        "type": "select",
                                                        "label": "Truncation Strategy",
                                                        "validate": {
                                                            "enum": [
                                                                "auto",
                                                                "last_messages"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "message",
                                                        "type": "text",
                                                        "label": "Message",
                                                        "required": true
                                                    }
                                                ],
                                                "advanced": true
                                            }
                                        },
                                        {
                                            "id": 221,
                                            "module": "telegram:SendReplyMessage",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3724557
                                            },
                                            "mapper": {
                                                "text": "{{220.result}}",
                                                "chatId": "{{189.message.from.id}}",
                                                "parseMode": "HTML",
                                                "replyMarkup": "",
                                                "messageThreadId": "",
                                                "replyToMessageId": "",
                                                "replyMarkupAssembleType": "reply_markup_enter"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3000,
                                                    "y": 1500,
                                                    "name": "Отправка пользователю"
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "parseMode": {
                                                            "label": "HTML"
                                                        },
                                                        "disableNotification": {
                                                            "mode": "chose"
                                                        },
                                                        "replyMarkupAssembleType": {
                                                            "label": "Enter the Reply Markup"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "telegram"
                                                            },
                                                            "label": "Тест для ковчега"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:telegram",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "chatId",
                                                        "type": "text",
                                                        "label": "Chat ID",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "text",
                                                        "type": "text",
                                                        "label": "Text",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "messageThreadId",
                                                        "type": "number",
                                                        "label": "Message Thread ID"
                                                    },
                                                    {
                                                        "name": "parseMode",
                                                        "type": "select",
                                                        "label": "Parse Mode",
                                                        "validate": {
                                                            "enum": [
                                                                "Markdown",
                                                                "HTML"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "disableNotification",
                                                        "type": "boolean",
                                                        "label": "Disable Notifications"
                                                    },
                                                    {
                                                        "name": "disableWebPagePreview",
                                                        "type": "boolean",
                                                        "label": "Disable Link Previews"
                                                    },
                                                    {
                                                        "name": "replyToMessageId",
                                                        "type": "number",
                                                        "label": "Original Message ID"
                                                    },
                                                    {
                                                        "name": "replyMarkupAssembleType",
                                                        "type": "select",
                                                        "label": "Enter/Assemble the Reply Markup Field",
                                                        "validate": {
                                                            "enum": [
                                                                "reply_markup_enter",
                                                                "reply_markup_assemble"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "replyMarkup",
                                                        "type": "text",
                                                        "label": "Reply Markup"
                                                    }
                                                ]
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "flow": [
                        {
                            "id": 255,
                            "module": "builtin:BasicRouter",
                            "version": 1,
                            "filter": {
                                "name": "Файлы",
                                "conditions": [
                                    [
                                        {
                                            "a": "{{189.message.document.file_name}}",
                                            "o": "exist"
                                        }
                                    ]
                                ]
                            },
                            "mapper": null,
                            "metadata": {
                                "designer": {
                                    "x": 1800,
                                    "y": 1950,
                                    "name": "Есть Thread ID / Нет Thread ID"
                                }
                            },
                            "routes": [
                                {
                                    "flow": [
                                        {
                                            "id": 226,
                                            "module": "telegram:DownloadFile",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3724557
                                            },
                                            "filter": {
                                                "name": "Нет пользователя",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{196.text}}",
                                                            "o": "notexist"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": {
                                                "fileId": "{{189.message.document.file_id}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2100,
                                                    "y": 1800,
                                                    "name": "Скачивает файл"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "telegram"
                                                            },
                                                            "label": "Тест для ковчега"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:telegram",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "fileId",
                                                        "type": "text",
                                                        "label": "File ID",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "fileId",
                                                        "type": "text",
                                                        "label": "File ID",
                                                        "required": true
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 263,
                                            "module": "openai-gpt-3:createVectorStoreFileBatch",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3446305
                                            },
                                            "mapper": {
                                                "createMode": "create",
                                                "fileIds": [
                                                    "file-6Z3fG1vye74W7UZHrJB2Rh"
                                                ],
                                                "vs_name": "telegram_store{{189.message.from.id}}",
                                                "days_expires_after": "365"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2400,
                                                    "y": 1800,
                                                    "name": "Создание Vector store"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "ProducerBBR_GPT",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "createMode": {
                                                            "mode": "chose",
                                                            "label": "Create New Vector Store"
                                                        },
                                                        "fileIds": {
                                                            "mode": "chose",
                                                            "label": [
                                                                "info.txt"
                                                            ]
                                                        },
                                                        "metadata": {
                                                            "mode": "chose"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "createMode",
                                                        "type": "select",
                                                        "label": "Batch Create Mode",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "choose",
                                                                "create"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "fileIds",
                                                        "type": "select",
                                                        "label": "File IDs",
                                                        "required": true,
                                                        "multiple": true
                                                    },
                                                    {
                                                        "name": "vs_name",
                                                        "type": "text",
                                                        "label": "Vector Store Name",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "days_expires_after",
                                                        "type": "uinteger",
                                                        "label": "Days Expires After"
                                                    },
                                                    {
                                                        "name": "metadata",
                                                        "type": "array",
                                                        "label": "Metadata",
                                                        "validate": {
                                                            "maxItems": 16
                                                        },
                                                        "spec": {
                                                            "spec": [
                                                                {
                                                                    "name": "key",
                                                                    "type": "text",
                                                                    "label": "Key",
                                                                    "required": true,
                                                                    "validate": {
                                                                        "max": 64
                                                                    }
                                                                },
                                                                {
                                                                    "name": "value",
                                                                    "type": "text",
                                                                    "label": "Value",
                                                                    "required": true,
                                                                    "validate": {
                                                                        "max": 512
                                                                    }
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Metadata",
                                                            "name": "value"
                                                        }
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 251,
                                            "module": "openai-gpt-3:uploadFile",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3446305
                                            },
                                            "mapper": {
                                                "fileName": "{{226.fileName}}",
                                                "fileData": "{{226.fileOutput}}",
                                                "purpose": "assistants"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2700,
                                                    "y": 1800,
                                                    "name": "Загружает файл в OpenAI"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "ProducerBBR_GPT",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "purpose": {
                                                            "mode": "chose",
                                                            "label": "Assistants"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "fileName",
                                                        "type": "text",
                                                        "label": "File Name",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "fileData",
                                                        "type": "buffer",
                                                        "label": "File Data",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "purpose",
                                                        "type": "select",
                                                        "label": "Purpose",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "assistants",
                                                                "vision",
                                                                "fine-tune",
                                                                "batch"
                                                            ]
                                                        }
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 252,
                                            "module": "openai-gpt-3:createVectorStoreFileBatch",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3446305
                                            },
                                            "mapper": {
                                                "createMode": "choose",
                                                "fileIds": "{{251.id}}",
                                                "vectorStoreId": "{{239.text}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3000,
                                                    "y": 1800,
                                                    "name": "Добавляет файл в Vector store"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "ProducerBBR_GPT",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "createMode": {
                                                            "mode": "chose",
                                                            "label": "Choose Vector Store"
                                                        },
                                                        "fileIds": {
                                                            "mode": "edit"
                                                        },
                                                        "vectorStoreId": {
                                                            "mode": "edit"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "createMode",
                                                        "type": "select",
                                                        "label": "Batch Create Mode",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "choose",
                                                                "create"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "fileIds",
                                                        "type": "select",
                                                        "label": "File IDs",
                                                        "required": true,
                                                        "multiple": true
                                                    },
                                                    {
                                                        "name": "vectorStoreId",
                                                        "type": "select",
                                                        "label": "Vector Store ID",
                                                        "required": true
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 253,
                                            "module": "openai-gpt-3:messageAssistantAdvanced",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3446305
                                            },
                                            "mapper": {
                                                "assistantId": "asst_3ihplvuKuyFLoyxylCz9UUcK",
                                                "role": "assistant",
                                                "tool_choice": "auto",
                                                "message": "{{252.file_counts.completed}} Если ты получаешь такое значение. Значит загрузка файла прошла успешна! Тебе нужно ответить: Файл успешно загружен! Я готовой работать с ним!"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3300,
                                                    "y": 1800,
                                                    "name": "Ассистент Файлов"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "ProducerBBR_GPT",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "assistantId": {
                                                            "mode": "chose",
                                                            "nested": [],
                                                            "label": "Тест ковчег (gpt-4o-mini)"
                                                        },
                                                        "role": {
                                                            "label": "Assistant"
                                                        },
                                                        "model": {
                                                            "mode": "chose"
                                                        },
                                                        "tools": {
                                                            "mode": "chose"
                                                        },
                                                        "file_search_resources": {
                                                            "mode": "edit"
                                                        },
                                                        "code_interpreter_resources": {
                                                            "mode": "chose"
                                                        },
                                                        "tool_choice": {
                                                            "mode": "chose",
                                                            "label": "Auto"
                                                        },
                                                        "response_format": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        },
                                                        "truncation_strategy": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "assistantId",
                                                        "type": "select",
                                                        "label": "Assistant",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "role",
                                                        "type": "select",
                                                        "label": "Role",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "user",
                                                                "assistant"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "threadId",
                                                        "type": "text",
                                                        "label": "Thread ID"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model"
                                                    },
                                                    {
                                                        "name": "tools",
                                                        "type": "select",
                                                        "label": "Tools",
                                                        "multiple": true,
                                                        "validate": {
                                                            "enum": [
                                                                "file_search",
                                                                "code_interpreter"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "file_search_resources",
                                                        "type": "select",
                                                        "label": "File Search Resources"
                                                    },
                                                    {
                                                        "name": "code_interpreter_resources",
                                                        "type": "select",
                                                        "label": "Code Interpreter Resources",
                                                        "validate": {
                                                            "maxItems": 20
                                                        },
                                                        "multiple": true
                                                    },
                                                    {
                                                        "name": "tool_choice",
                                                        "type": "select",
                                                        "label": "Tool Choice",
                                                        "validate": {
                                                            "enum": [
                                                                "none",
                                                                "auto",
                                                                "required",
                                                                "file_search",
                                                                "code_interpreter",
                                                                "function"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "instructions",
                                                        "type": "text",
                                                        "label": "Instructions"
                                                    },
                                                    {
                                                        "name": "max_prompt_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Prompt Tokens"
                                                    },
                                                    {
                                                        "name": "max_completion_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Completion Tokens"
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "top_p",
                                                        "type": "number",
                                                        "label": "Top P",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "response_format",
                                                        "type": "select",
                                                        "label": "Response Format",
                                                        "validate": {
                                                            "enum": [
                                                                "auto",
                                                                "json_object",
                                                                "text"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "truncation_strategy",
                                                        "type": "select",
                                                        "label": "Truncation Strategy",
                                                        "validate": {
                                                            "enum": [
                                                                "auto",
                                                                "last_messages"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "message",
                                                        "type": "text",
                                                        "label": "Message",
                                                        "required": true
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 261,
                                            "module": "datastore:AddRecord",
                                            "version": 1,
                                            "parameters": {
                                                "datastore": 59056
                                            },
                                            "mapper": {
                                                "key": "",
                                                "overwrite": false,
                                                "data": {
                                                    "ID User": "{{189.message.from.id}}",
                                                    "Thread ID": "{{253.thread_id}}",
                                                    "Vector store": ""
                                                }
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3600,
                                                    "y": 1800,
                                                    "name": "Записывает Thread ID"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "datastore": {
                                                            "label": "Ковчег"
                                                        }
                                                    },
                                                    "expect": {
                                                        "overwrite": {
                                                            "mode": "chose"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "datastore",
                                                        "type": "datastore",
                                                        "label": "Data store",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "key",
                                                        "type": "text",
                                                        "label": "Key"
                                                    },
                                                    {
                                                        "name": "overwrite",
                                                        "type": "boolean",
                                                        "label": "Overwrite an existing record",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "data",
                                                        "type": "collection",
                                                        "label": "Record",
                                                        "spec": [
                                                            {
                                                                "name": "ID User",
                                                                "type": "text",
                                                                "label": null
                                                            },
                                                            {
                                                                "name": "Thread ID",
                                                                "type": "text",
                                                                "label": null
                                                            },
                                                            {
                                                                "name": "Vector store",
                                                                "type": "text",
                                                                "label": null
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 262,
                                            "module": "datastore:AddRecord",
                                            "version": 1,
                                            "parameters": {
                                                "datastore": 59056
                                            },
                                            "mapper": {
                                                "key": "",
                                                "overwrite": false,
                                                "data": {
                                                    "ID User": "{{189.message.from.id}}",
                                                    "Thread ID": "",
                                                    "Vector store": "{{263.vector_store_id}}"
                                                }
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3900,
                                                    "y": 1800,
                                                    "name": "Записывает Vector store"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "datastore": {
                                                            "label": "Ковчег"
                                                        }
                                                    },
                                                    "expect": {
                                                        "overwrite": {
                                                            "mode": "chose"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "datastore",
                                                        "type": "datastore",
                                                        "label": "Data store",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "key",
                                                        "type": "text",
                                                        "label": "Key"
                                                    },
                                                    {
                                                        "name": "overwrite",
                                                        "type": "boolean",
                                                        "label": "Overwrite an existing record",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "data",
                                                        "type": "collection",
                                                        "label": "Record",
                                                        "spec": [
                                                            {
                                                                "name": "ID User",
                                                                "type": "text",
                                                                "label": null
                                                            },
                                                            {
                                                                "name": "Thread ID",
                                                                "type": "text",
                                                                "label": null
                                                            },
                                                            {
                                                                "name": "Vector store",
                                                                "type": "text",
                                                                "label": null
                                                            }
                                                        ]
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 254,
                                            "module": "telegram:SendReplyMessage",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3724557
                                            },
                                            "mapper": {
                                                "chatId": "{{189.message.from.id}}",
                                                "text": "{{253.result}}",
                                                "messageThreadId": "",
                                                "parseMode": "HTML",
                                                "replyToMessageId": "",
                                                "replyMarkupAssembleType": "reply_markup_enter",
                                                "replyMarkup": ""
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 4200,
                                                    "y": 1800,
                                                    "name": "Отправка пользователю"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "Тест для ковчега",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "telegram"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "parseMode": {
                                                            "label": "HTML"
                                                        },
                                                        "disableNotification": {
                                                            "mode": "chose"
                                                        },
                                                        "replyMarkupAssembleType": {
                                                            "label": "Enter the Reply Markup"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:telegram",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "chatId",
                                                        "type": "text",
                                                        "label": "Chat ID",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "text",
                                                        "type": "text",
                                                        "label": "Text",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "messageThreadId",
                                                        "type": "number",
                                                        "label": "Message Thread ID"
                                                    },
                                                    {
                                                        "name": "parseMode",
                                                        "type": "select",
                                                        "label": "Parse Mode",
                                                        "validate": {
                                                            "enum": [
                                                                "Markdown",
                                                                "HTML"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "disableNotification",
                                                        "type": "boolean",
                                                        "label": "Disable Notifications"
                                                    },
                                                    {
                                                        "name": "disableWebPagePreview",
                                                        "type": "boolean",
                                                        "label": "Disable Link Previews"
                                                    },
                                                    {
                                                        "name": "replyToMessageId",
                                                        "type": "number",
                                                        "label": "Original Message ID"
                                                    },
                                                    {
                                                        "name": "replyMarkupAssembleType",
                                                        "type": "select",
                                                        "label": "Enter/Assemble the Reply Markup Field",
                                                        "validate": {
                                                            "enum": [
                                                                "reply_markup_enter",
                                                                "reply_markup_assemble"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "replyMarkup",
                                                        "type": "text",
                                                        "label": "Reply Markup"
                                                    }
                                                ]
                                            }
                                        }
                                    ]
                                },
                                {
                                    "flow": [
                                        {
                                            "id": 256,
                                            "module": "telegram:DownloadFile",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3724557
                                            },
                                            "filter": {
                                                "name": "Есть Пользователь",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{196.text}}",
                                                            "o": "exist"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": {
                                                "fileId": "{{189.message.document.file_id}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2100,
                                                    "y": 2100,
                                                    "name": "Скачивает файл"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "telegram"
                                                            },
                                                            "label": "Тест для ковчега"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:telegram",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "fileId",
                                                        "type": "text",
                                                        "label": "File ID",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "fileId",
                                                        "type": "text",
                                                        "label": "File ID",
                                                        "required": true
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 257,
                                            "module": "openai-gpt-3:uploadFile",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3446305
                                            },
                                            "mapper": {
                                                "fileName": "{{256.fileName}}",
                                                "fileData": "{{256.fileOutput}}",
                                                "purpose": "assistants"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2400,
                                                    "y": 2100,
                                                    "name": "Загружает файл в OpenAI"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "ProducerBBR_GPT",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "purpose": {
                                                            "mode": "chose",
                                                            "label": "Assistants"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "fileName",
                                                        "type": "text",
                                                        "label": "File Name",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "fileData",
                                                        "type": "buffer",
                                                        "label": "File Data",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "purpose",
                                                        "type": "select",
                                                        "label": "Purpose",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "assistants",
                                                                "vision",
                                                                "fine-tune",
                                                                "batch"
                                                            ]
                                                        }
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 258,
                                            "module": "openai-gpt-3:createVectorStoreFileBatch",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3446305
                                            },
                                            "mapper": {
                                                "createMode": "choose",
                                                "fileIds": "{{257.id}}",
                                                "vectorStoreId": "{{239.text}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2700,
                                                    "y": 2100,
                                                    "name": "Добавляет файл в Vector store"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "ProducerBBR_GPT",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "createMode": {
                                                            "mode": "chose",
                                                            "label": "Choose Vector Store"
                                                        },
                                                        "fileIds": {
                                                            "mode": "edit"
                                                        },
                                                        "vectorStoreId": {
                                                            "mode": "edit"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "createMode",
                                                        "type": "select",
                                                        "label": "Batch Create Mode",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "choose",
                                                                "create"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "fileIds",
                                                        "type": "select",
                                                        "label": "File IDs",
                                                        "required": true,
                                                        "multiple": true
                                                    },
                                                    {
                                                        "name": "vectorStoreId",
                                                        "type": "select",
                                                        "label": "Vector Store ID",
                                                        "required": true
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 259,
                                            "module": "openai-gpt-3:messageAssistantAdvanced",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3446305
                                            },
                                            "mapper": {
                                                "assistantId": "asst_3ihplvuKuyFLoyxylCz9UUcK",
                                                "role": "assistant",
                                                "threadId": "{{196.text}}",
                                                "tools": [
                                                    "file_search"
                                                ],
                                                "file_search_resources": "{{239.text}}",
                                                "tool_choice": "auto",
                                                "message": "{{258.file_counts.completed}} Если ты получаешь такое значение. Значит загрузка файла прошла успешна! Тебе нужно ответить: Файл успешно загружен! Я готовой работать с ним!"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3000,
                                                    "y": 2100,
                                                    "name": "Ассистент файлов"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "ProducerBBR_GPT",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "assistantId": {
                                                            "mode": "chose",
                                                            "nested": [],
                                                            "label": "Тест ковчег (gpt-4o-mini)"
                                                        },
                                                        "role": {
                                                            "label": "Assistant"
                                                        },
                                                        "model": {
                                                            "mode": "chose"
                                                        },
                                                        "tools": {
                                                            "mode": "chose"
                                                        },
                                                        "file_search_resources": {
                                                            "mode": "edit"
                                                        },
                                                        "code_interpreter_resources": {
                                                            "mode": "chose"
                                                        },
                                                        "tool_choice": {
                                                            "mode": "chose",
                                                            "label": "Auto"
                                                        },
                                                        "response_format": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        },
                                                        "truncation_strategy": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "assistantId",
                                                        "type": "select",
                                                        "label": "Assistant",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "role",
                                                        "type": "select",
                                                        "label": "Role",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "user",
                                                                "assistant"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "threadId",
                                                        "type": "text",
                                                        "label": "Thread ID"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model"
                                                    },
                                                    {
                                                        "name": "tools",
                                                        "type": "select",
                                                        "label": "Tools",
                                                        "multiple": true,
                                                        "validate": {
                                                            "enum": [
                                                                "file_search",
                                                                "code_interpreter"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "file_search_resources",
                                                        "type": "select",
                                                        "label": "File Search Resources"
                                                    },
                                                    {
                                                        "name": "code_interpreter_resources",
                                                        "type": "select",
                                                        "label": "Code Interpreter Resources",
                                                        "validate": {
                                                            "maxItems": 20
                                                        },
                                                        "multiple": true
                                                    },
                                                    {
                                                        "name": "tool_choice",
                                                        "type": "select",
                                                        "label": "Tool Choice",
                                                        "validate": {
                                                            "enum": [
                                                                "none",
                                                                "auto",
                                                                "required",
                                                                "file_search",
                                                                "code_interpreter",
                                                                "function"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "instructions",
                                                        "type": "text",
                                                        "label": "Instructions"
                                                    },
                                                    {
                                                        "name": "max_prompt_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Prompt Tokens"
                                                    },
                                                    {
                                                        "name": "max_completion_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Completion Tokens"
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "top_p",
                                                        "type": "number",
                                                        "label": "Top P",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "response_format",
                                                        "type": "select",
                                                        "label": "Response Format",
                                                        "validate": {
                                                            "enum": [
                                                                "auto",
                                                                "json_object",
                                                                "text"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "truncation_strategy",
                                                        "type": "select",
                                                        "label": "Truncation Strategy",
                                                        "validate": {
                                                            "enum": [
                                                                "auto",
                                                                "last_messages"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "message",
                                                        "type": "text",
                                                        "label": "Message",
                                                        "required": true
                                                    }
                                                ],
                                                "advanced": true
                                            }
                                        },
                                        {
                                            "id": 260,
                                            "module": "telegram:SendReplyMessage",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3724557
                                            },
                                            "mapper": {
                                                "chatId": "{{189.message.from.id}}",
                                                "text": "{{259.result}}",
                                                "messageThreadId": "",
                                                "parseMode": "HTML",
                                                "replyToMessageId": "",
                                                "replyMarkupAssembleType": "reply_markup_enter",
                                                "replyMarkup": ""
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3300,
                                                    "y": 2100,
                                                    "name": "Отправка пользователю"
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "Тест для ковчега",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "telegram"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "parseMode": {
                                                            "label": "HTML"
                                                        },
                                                        "disableNotification": {
                                                            "mode": "chose"
                                                        },
                                                        "replyMarkupAssembleType": {
                                                            "label": "Enter the Reply Markup"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:telegram",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "chatId",
                                                        "type": "text",
                                                        "label": "Chat ID",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "text",
                                                        "type": "text",
                                                        "label": "Text",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "messageThreadId",
                                                        "type": "number",
                                                        "label": "Message Thread ID"
                                                    },
                                                    {
                                                        "name": "parseMode",
                                                        "type": "select",
                                                        "label": "Parse Mode",
                                                        "validate": {
                                                            "enum": [
                                                                "Markdown",
                                                                "HTML"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "disableNotification",
                                                        "type": "boolean",
                                                        "label": "Disable Notifications"
                                                    },
                                                    {
                                                        "name": "disableWebPagePreview",
                                                        "type": "boolean",
                                                        "label": "Disable Link Previews"
                                                    },
                                                    {
                                                        "name": "replyToMessageId",
                                                        "type": "number",
                                                        "label": "Original Message ID"
                                                    },
                                                    {
                                                        "name": "replyMarkupAssembleType",
                                                        "type": "select",
                                                        "label": "Enter/Assemble the Reply Markup Field",
                                                        "validate": {
                                                            "enum": [
                                                                "reply_markup_enter",
                                                                "reply_markup_assemble"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "replyMarkup",
                                                        "type": "text",
                                                        "label": "Reply Markup"
                                                    }
                                                ]
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ],
    "metadata": {
        "instant": true,
        "version": 1,
        "scenario": {
            "roundtrips": 1,
            "maxErrors": 3,
            "autoCommit": true,
            "autoCommitTriggerLast": true,
            "sequential": false,
            "slots": null,
            "confidential": false,
            "dataloss": false,
            "dlq": false,
            "freshVariables": false
        },
        "designer": {
            "orphans": [],
            "notes": [
                {
                    "id": 0,
                    "text": "",
                    "filter": false
                }
            ]
        },
        "zone": "eu2.make.com"
    }
}